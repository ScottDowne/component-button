<!doctype html>
<html>
<head>
  <title>button tests</title>
  <script src="../../../tools/test/htmltest.js"></script>
  <script src="../../../tools/test/chai/chai.js"></script>
    <link rel="import" href="../../../appmaker/public/ceci/ceci-element-base.html">
    <link rel="import" href="../../../appmaker/public/ceci/ceci-element.html">
    <link rel="import" href="../../../appmaker/public/ceci/ceci-broadcast.html">
    <link rel="import" href="../../../appmaker/public/ceci/ceci-listen.html">
    <link rel="import" href="../../../appmaker/public/ceci/ceci-app.html">
    <link rel="import" href="../../../appmaker/public/ceci/ceci-card.html">
    <link rel="import" href="../../../appmaker/public/ceci/test/fixtures/ceci-value-holder.html">
    <link rel="import" href="../../component.html">
  <script src="../../../appmaker/public/vendor/polymer/polymer.min.js"></script>
</head>
<body>
    <ceci-app id="hello-app">
      <ceci-card visible>
        <ceci-top>
          <ceci-button id="hello-button" class="hi" label="Say hello!" value="hi">
          </ceci-button>
        </ceci-top>
        <ceci-middle>
          <ceci-value-holder id="value-holder">
            <ceci-listen on="blue" for="setValue"></ceci-listen>
          </ceci-value-holder>
        </ceci-middle>
        <ceci-bottom>
        </ceci-bottom>
      </ceci-card>
    </ceci-app>

  <script>
    var assert = chai.assert;
    document.addEventListener('WebComponentsReady', function() {
      var app = document.querySelector('ceci-app');
      var card = document.querySelector('ceci-card');
      console.log("APP IS", app);
      console.log("APP.countCards IS", app.countCards);
      console.log("CARD IS", card);
      console.log("CARD.show IS", card.show);
      console.log("registry.x-foo IS", window.CustomElements.registry['x-foo']);
      console.log("registry.ceci-app IS", window.CustomElements.registry['ceci-app']);
      console.log("registry.ceci-card IS", window.CustomElements.registry['ceci-card']);
      console.log("registry.ceci-element IS", window.CustomElements.registry['ceci-element']);
      assert.equal(app.countCards(), 1);
      app.addCard();
      assert.equal(app.countCards(), 2);

      done();
    });
  </script>
</body>
</html>