<polymer-element name="ceci-button" attributes="textcolor buttoncolor buttonactivecolor label value" extends="ceci-element"
  label="Click Me" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915">
  <template>
    <link rel="stylesheet" href="component.css"></link>
    <button id="button" on-click="{{click}}"></button>
    <shadow></shadow>
    <ceci-definition>
      <ceci-definition-tags>
        <ceci-definition-tag value="button">
        <ceci-definition-tag value="click">
        <ceci-definition-tag value="tap">
      </ceci-definition-tags>
      <ceci-definition-thumbnail href="./thumbnail.png"/>
      <ceci-definition-broadcasts>
        <ceci-definition-broadcast name="click" description="Occurs when button is clicked." default="true"/>
      </ceci-definition-broadcasts>
      <ceci-definition-listeners>
        <ceci-definition-listener attribute="label" label="Set Label" description="Changes the text shown on the button."/>
        <ceci-definition-listener attribute="value" label="Set Value" description="Changes the value sent by the button."/>
        <ceci-definition-listener attribute="textcolor" label="Set Text Color" description="Changes the color of the button's label."/>
        <ceci-definition-listener attribute="buttoncolor" label="Set Button Color" description="Changes the background color of the button."/>
        <ceci-definition-listener attribute="buttonactivecolor" label="Set Button Active Color" description="Changes the background color of the button while it is being clicked or tapped."/>
        <ceci-definition-listener function="click" label="Click" description="Causes a fake click event to occur."/>
      </ceci-definition-listeners>
      <ceci-definition-editables>
        <ceci-definition-editable attribute="label" type="text" label="Label" description="Text shown on the button" />
        <ceci-definition-editable attribute="value" type="text" label="Set Value" description="Value sent by the button."/>
        <ceci-definition-editable attribute="textcolor" type="color" label="Set Text Color" description="Color of the button's label."/>
        <ceci-definition-editable attribute="buttoncolor" type="color" label="Set Button Color" description="Background color of the button."/>
        <ceci-definition-editable attribute="buttonactivecolor" type="color" label="Set Button Active Color" description="Background color of the button while it is being clicked or tapped."/>
      </ceci-definition-editables>
    </ceci-definition>
  </template>
  <script>
    Polymer('ceci-button', {
      ready: function () {
        this.super();

        var that = this;
        this.$.button.addEventListener('mousedown', function (e) {
          var valueBefore = that.buttoncolor;
          if (that.buttonactivecolor) {
            that.$.button.style.backgroundColor = that.buttonactivecolor;
            window.addEventListener('mouseup', function (e) {
              that.$.button.style.backgroundColor = valueBefore;
            }, false);
          }
        }, false);
      },
      click: function () {
        this.broadcast('click', this.getAttribute('value'));
      },
      labelChanged: function (oldValue, newValue) {
        this.$.button.innerHTML = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      }
    });
  </script>
</polymer-element>
