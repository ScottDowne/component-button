<polymer-element name="ceci-button" attributes="textcolor buttoncolor buttonactivecolor disabled buttondisabledcolor label value" value="Click" extends="ceci-element"
  label="Click Me" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" buttondisabledcolor="#358915" disabled="false">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Button",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when button is clicked.",
          "default": true
        }
      },
      "listeners": {
        "click": {
          "description": "Causes a fake click event to occur.",
          "label": "Click"
        },
        "disable": {
          "description": "Disables signals from being sent when the button is clicked",
          "label": "Disable"
        },
        "enable": {
          "description": "Enables signals from being sent when the button is clicked",
          "label": "Enable"
        },
        "toggleDisabled": {
          "description": "Toggles enable and disable on and off",
          "label": "Toggle Enable/Disable"
        }
      },
      "attributes": {
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text",
          "listener": true
        },
        "value": {
          "label": "Value",
          "description": "Value sent by the button.",
          "editable": "text",
          "listener": true
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color",
          "listener": true
        },
        "buttoncolor": {
          "label": "Button Color",
          "description": "Background color of the button.",
          "editable": "color",
          "listener": true
        },
        "buttonactivecolor": {
          "label": "Button Active Color",
          "description": "Background color of the button while it is being clicked or tapped.",
          "editable": "color",
          "listener": true
        },
        "buttondisabledcolor": {
          "label": "Button Disabled Color",
          "description": "Background color of the button while it is disabled.",
          "editable": "color",
          "listener": true
        },
        "disabled": {
          "label": "Disabled status",
          "description": "Is the button's signal status enabled or disabled.",
          "editable": "boolean",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <link rel="stylesheet" href="component.css"></link>
    <button id="button" on-click="{{click}}">{{label}}</button>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-button', {
      disabled: false,
      ready: function () {
        this.super();

        var that = this;
        function onMouseDown() {
          if (that.disabled) {
            return;
          }
          if (that.buttonactivecolor) {
            that.$.button.style.backgroundColor = that.buttonactivecolor;
            window.addEventListener('mouseup', onMouseUp);
          }
        }
        function onMouseUp() {
          window.removeEventListener('mouseup', onMouseUp);
          that.$.button.style.backgroundColor = that.buttoncolor;;
        }
        this.$.button.addEventListener('mousedown', onMouseDown);
      },
      click: function () {
        if (!this.disabled) {
          this.broadcast('click', this.getAttribute('value'));
        }
      },
      disable: function () {
        this.disabled = true;
      },
      enable: function () {
        this.disabled = false;
      },
      toggleDisabled: function () {
        this.disabled = !this.disabled;
      },
      disabledChanged: function() {
        if (this.disabled) {
          this.shadowRoot.querySelector("#button").classList.add("disabled");
          this.$.button.style.backgroundColor = this.buttondisabledcolor;
        } else {
          this.shadowRoot.querySelector("#button").classList.remove("disabled");
          this.$.button.style.backgroundColor = this.buttoncolor;
        }
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      }
    });
  </script>
</polymer-element>
